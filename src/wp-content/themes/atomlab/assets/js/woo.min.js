jQuery(document).ready(function(y){"use strict";var e,t=y("body");y(".add_to_wishlist").on("click",function(){y(this).addClass("loading")}),y(document).on("insightGridBeforeInit",function(i,a){if(!a.hasClass("tm-product"))return!1;var n=a.find(".tm-grid-query").first();a.find(".price_slider").on("slidechange",function(i,e){var t=jQuery.parseJSON(n.val());t.minPrice=e.values[0],t.maxPrice=e.values[1],n.val(JSON.stringify(t)),y(document).trigger("insightGridInfinityLoad",a)}),a.find(".tm-grid-ajax-field").on("change",function(){var i=jQuery.parseJSON(n.val()),e=y(this).val();if(y(this).hasClass("product-sorting")){var t=e.split(":");switch(t[0]){case"popularity":i.meta_key="total_sales",i.orderby="meta_value_num",i.order="desc";break;case"rating":i.meta_key="_wc_average_rating",i.orderby="meta_value_num",i.order="desc";break;case"price":i.meta_key="_price",i.orderby="meta_value_num",i.order=t[1];break;case"date":i.meta_key="",i.orderby="date",i.order=t[1]}}n.val(JSON.stringify(i)),y(document).trigger("insightGridInfinityLoad",a)})}),y(document).on("insightGridInit",function(i,e,t){e.hasClass("equal-thumbnail-height")&&t.find(".product-thumbnail").matchHeight()}),y(document).on("insightSwiperInit",function(i,e,t){t.hasClass("equal-thumbnail-height")&&t.find(".product-thumbnail").matchHeight()}),y(document).on("insightGridUpdate",function(i,e,t,a){e.hasClass("tm-product")&&e.hasClass("style-grid")&&(a.find(".product-thumbnail").matchHeight(),void 0!==isw.Swatches&&isw.Swatches.init())}),(e=y("#mini-cart")).on("click",function(){SmartPhone.isAny()?window.location.href=y(this).data("url"):y(this).addClass("open")}),y(document).on("click",function(i){0==y(i.target).closest(e).length&&e.removeClass("open")}),t.on("click",".yith-compare-btn .compare",function(){y(this).addClass("loading")}),t.on("yith_woocompare_open_popup",function(){y(".yith-compare-btn .compare").removeClass("loading"),t.addClass("compare-popup-opened")}),t.on("click","#cboxClose, #cboxOverlay",function(){t.removeClass("compare-popup-opened")}),y(".quickview-btn").each(function(){var i=y(this).siblings(".woo-quick-view-popup");y(this).magnificPopup({items:{src:i.html(),type:"inline"},callbacks:{open:function(){"undefined"!=typeof isw&&void 0!==isw.Swatches&&isw.Swatches.init(),y(".woo-quick-view-popup-content .tm-swiper").insightSwiper(),y(".woo-quick-view-popup-content .entry-summary").slimScroll({height:"600px",size:"5px",borderRadius:0,distance:0})}}})}),y(document).on("click",".increase, .decrease",function(){var i=y(this).siblings(".qty"),e=parseFloat(i.val()),t=parseFloat(i.attr("max")),a=parseFloat(i.attr("min")),n=i.attr("step");e&&""!==e&&"NaN"!==e||(e=0),""!==t&&"NaN"!==t||(t=""),""!==a&&"NaN"!==a||(a=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),y(this).is(".increase")?t&&(t==e||t<e)?i.val(t):i.val(e+parseFloat(n)):a&&(a==e||e<a)?i.val(a):0<e&&i.val(e-parseFloat(n)),i.trigger("change")}),y(".switcher-item").on("click",function(){if(!y(this).hasClass("active")){var i={action:"shop_layout_change"};y(this).hasClass("list")?i.shop_layout="list":i.shop_layout="grid",i=y.param(i),y.ajax({url:$insight.ajaxurl,type:"POST",data:i,dataType:"json",success:function(i){location.reload()},error:function(i){alert(i)}})}}),1==$insight.noticeCookieEnable&&"no"===$insight.noticeCookieConfirm&&""!=$insight.noticeCookieMessages&&(y.growl({location:"br",fixed:!0,duration:36e5,title:"",message:$insight.noticeCookieMessages}),y("#tm-button-cookie-notice-ok").on("click",function(){y(this).parents(".growl-message").first().siblings(".growl-close").trigger("click");var i={action:"notice_cookie_confirm"};i=y.param(i),y.ajax({url:$insight.ajaxurl,type:"POST",data:i,dataType:"json",success:function(i){y.growl.notice({location:"br",duration:5e3,title:"",message:$insight.noticeCookieOKMessages})},error:function(i){alert(i)}})})),y(window).on("load",function(i){!function(){if(!t.hasClass("single-product"))return;var m=y(".isw-swatches--in-single"),f=m.data("product_variations"),v=y(".woo-single-images .tm-swiper"),w=v.children(".swiper-container")[0].swiper;m.find("select").on("change",function(){for(var i=!0,e={},t=m.serializeArray(),a=0;a<t.length;a++){var n=t[a].name;if("attribute_"===n.substring(0,10)&&(e[n]=t[a].value,""===t[a].value)){i=!1;break}}if(!0===i){for(var o="",a=0;a<f.length;a++){var s=f[a].attributes,r=!0,c=!0;for(var l in e)for(var u in s){var d=e[l],h=s[u];if(u===l){if(""===h){c=!1;continue}h!==d&&(r=!1)}}if(!0===r&&(o=f[a].image.url),!0===r&&!0===c)break}""!==o&&v.find("a").each(function(){var i=y(this).attr("href");if(i==o){var e=y(this).parents(".swiper-slide").first(),t=e.index();return w.slideTo(t),!0}})}else{var p=v.find(".woocommerce-main-image"),g=p.parents(".swiper-slide").first().index();w.slideTo(g)}})}()})});